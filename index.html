<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monetization Simulator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .screen {
        display: none;
    }
    .active {
        display: block;
    }
    #achievement-popup {
        transition: opacity 0.5s, transform 0.5s;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- Main Container -->
  <div class="container mx-auto max-w-4xl p-4">

    <!-- Header -->
    <header class="bg-gray-800 text-white p-4 rounded-lg shadow-lg mb-4">
      <h1 class="text-3xl font-bold text-center">Monetization Simulator</h1>
    </header>

    <!-- Global Stats Bar -->
    <div class="bg-gray-900 text-white p-3 rounded-lg shadow-md mb-4 sticky top-2 z-50 flex justify-around items-center text-center">
      <div>
        <span class="text-sm text-gray-400">Leads</span>
        <p class="text-xl font-semibold" id="globalLeadCount">0</p>
      </div>
      <div>
        <span class="text-sm text-gray-400">Money</span>
        <p class="text-xl font-semibold">$<span id="globalMoneyCount">0.00</span></p>
      </div>
      <div>
        <span class="text-sm text-gray-400">Rate</span>
        <p class="text-xl font-semibold">$<span id="globalRate">0.00</span>/s</p>
      </div>
    </div>

    <!-- Navigation Tabs -->
    <div id="nav-buttons" class="bg-white rounded-lg shadow-md p-2 mb-4 flex flex-wrap justify-center gap-2">
      <button onclick="showScreen('salesScreen')" class="px-4 py-2 rounded-md bg-blue-500 text-white font-semibold hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400">Sales</button>
      <button onclick="showScreen('accountScreen')" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Accounts</button>
      <button onclick="showScreen('staffScreen')" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Staff</button>
      <button onclick="showScreen('upgradesScreen')" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Upgrades</button>
      <button onclick="showScreen('achievementsScreen')" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Achievements</button>
    </div>

    <!-- Sales Screen -->
    <div id="salesScreen" class="screen active p-4 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Sales Screen</h2>
      <button id="generateLeadBtn" class="w-full md:w-auto px-6 py-3 rounded-lg bg-green-500 text-white font-bold text-lg shadow-md hover:bg-green-600 transition-transform transform hover:scale-105" onclick="tryGenerateLead()">Generate Lead</button>
      <div class="mt-4 text-xl">Leads: <span id="leadCount" class="font-bold">0</span></div>
      <div id="emailText" class="mt-4 p-4 h-48 bg-gray-900 text-green-400 font-mono rounded-lg overflow-y-auto text-left whitespace-pre-wrap shadow-inner"></div>
    </div>

    <!-- Accounts Screen -->
    <div id="accountScreen" class="screen p-4 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Accounts Screen</h2>
      <button id="developLeadBtn" class="w-full md:w-auto px-6 py-3 rounded-lg bg-indigo-500 text-white font-bold text-lg shadow-md hover:bg-indigo-600 transition-transform transform hover:scale-105" onclick="developLead()">Develop Code</button>
      <div class="w-full bg-gray-200 rounded-full h-6 mt-4 overflow-hidden shadow-inner">
        <div id="progressBar" class="bg-indigo-600 h-6 rounded-full transition-all duration-200" style="width: 0%"></div>
      </div>
      <div class="mt-4 text-xl">Money: $<span id="moneyCount" class="font-bold">0.00</span></div>
      <div id="adScriptText" class="mt-4 p-4 h-48 bg-gray-900 text-cyan-400 font-mono rounded-lg overflow-y-auto text-left whitespace-pre-wrap shadow-inner"></div>
    </div>

    <!-- Staff Screen -->
    <div id="staffScreen" class="screen p-4 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Staff</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <h3 class="text-xl font-semibold mb-2">Hired Staff</h3>
            <ul id="hiredStaffList" class="list-disc list-inside bg-gray-100 p-3 rounded-lg min-h-[100px]"></ul>
        </div>
        <div>
            <div class="staff-category mb-4">
              <h3 class="text-xl font-semibold mb-2">Sales</h3>
              <div class="staff-list flex flex-wrap gap-2" id="salesStaffList"></div>
            </div>
            <div class="staff-category mb-4">
              <h3 class="text-xl font-semibold mb-2">Accounts</h3>
              <div class="staff-list flex flex-wrap gap-2" id="accountsStaffList"></div>
            </div>
            <div class="staff-category">
              <h3 class="text-xl font-semibold mb-2">Products</h3>
              <div class="staff-list flex flex-wrap gap-2" id="productsStaffList"></div>
            </div>
        </div>
      </div>
    </div>

    <!-- Upgrades Screen -->
    <div id="upgradesScreen" class="screen p-4 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-4">Upgrades</h2>
        <div class="upgrade-category mb-6">
            <h3 class="text-xl font-semibold border-b-2 border-gray-200 pb-2 mb-3">Sales Upgrades</h3>
            <div id="salesUpgradesList" class="space-y-3"></div>
        </div>
        <div class="upgrade-category mb-6">
            <h3 class="text-xl font-semibold border-b-2 border-gray-200 pb-2 mb-3">Accounts Upgrades</h3>
            <div id="accountsUpgradesList" class="space-y-3"></div>
        </div>
        <div class="upgrade-category">
            <h3 class="text-xl font-semibold border-b-2 border-gray-200 pb-2 mb-3">Global Upgrades</h3>
            <div id="globalUpgradesList" class="space-y-3"></div>
        </div>
    </div>
    
    <!-- Achievements Screen -->
    <div id="achievementsScreen" class="screen p-4 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-4">Achievements</h2>
        <div id="achievementsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Achievements will be rendered here -->
        </div>
    </div>

  </div>
  
  <!-- Achievement Popup -->
  <div id="achievement-popup" class="fixed bottom-5 right-5 bg-gray-900 text-white p-4 rounded-lg shadow-2xl opacity-0 transform translate-y-10 pointer-events-none">
      <h3 class="font-bold text-lg text-yellow-400" id="achievement-title"></h3>
      <p class="text-sm" id="achievement-desc"></p>
  </div>


  <script>
    // --- GAME STATE VARIABLES ---
    let leads = 0, money = 0, developClicks = 0, passiveIncome = 0, totalMoneyEarned = 0;
    let emailCharIndex = 0, adCharIndex = 0;
    let leadGenerationChance = 0.01;
    let clicksToDevelopLead = 100;
    let incomePerLead = 0.01;
    let holdInterval = null;

    // --- CONTENT & CONFIG ---
    const emailContent = `Dear Valued Client,\n\nWe hope this message finds you well. I'm writing to follow up on our previous conversation regarding the exciting monetization opportunities available to you...`;
    const adScriptContent = `// Monetization Script\nfunction showAd() {\n  const ad = document.createElement('div');\n  ad.className = 'ad-banner';\n  ad.innerText = 'This space is monetized!';\n  document.body.appendChild(ad);\n}\nsetInterval(showAd, 5000);`;
    const hiredStaff = new Set();
    const staffButtons = {};
    const staffMembers = {
      sales: ['Artyom', 'Alan', 'Aruna', 'Dora', 'Syrym'],
      accounts: ['Azret', 'Asiya', 'Danil', 'Aizhan', 'Amir', 'Akzhan'],
      products: ['Emil']
    };

    const upgrades = {
      // Sales
      betterLeadForms: { level: 0, cost: 1, costMultiplier: 5, chanceIncrease: 0.001 },
      referralProgram: { level: 0, cost: 15, costMultiplier: 3, interval: null },
      aggressiveFollowup: { level: 0, cost: 7, costMultiplier: 3, chance: 0 },
      // Accounts
      asiyasHelp: { level: 0, cost: 5, costMultiplier: 5, clicksReduction: 10 },
      secondMonitor: { purchased: false, cost: 10 },
      newAdNetworks: { level: 0, cost: 10, costMultiplier: 3, incomeBonus: 0.1 },
      // Global
      nytPuzzles: { purchased: false, cost: 15, multiplier: 1.5 },
      corporateCulture: { purchased: false, cost: 50 },
      sycGlobal: { purchased: false, cost: 25, multiplier: 1.2 },
      coffeeMachine: { purchased: false, cost: 100 }
    };
    
    const achievements = {
        mukhtarSatisfied: { name: "Mukhtar is satisfied", description: "Earn $50 total.", unlocked: false, condition: () => totalMoneyEarned >= 50 },
        mukhtarHappy: { name: "Mukhtar is happy", description: "Earn $100 total.", unlocked: false, condition: () => totalMoneyEarned >= 100 },
        mukhtarReallyHappy: { name: "Mukhtar is REALLY happy", description: "Earn $1,000 total.", unlocked: false, condition: () => totalMoneyEarned >= 1000 },
        someonePromoted: { name: "Someone is getting promoted", description: "Earn $5,000 total.", unlocked: false, condition: () => totalMoneyEarned >= 5000 },
        syc: { name: "100% СУЦ", description: "Earn $10,000 total.", unlocked: false, condition: () => totalMoneyEarned >= 10000 },
        buyMyUSDT: { name: "Buy my USDT", description: "Hire Emil.", unlocked: false, condition: () => hiredStaff.has('Emil') },
        shapkaGang: { name: "Шапка gang", description: "Hire all staff.", unlocked: false, condition: () => hiredStaff.size === (staffMembers.sales.length + staffMembers.accounts.length + staffMembers.products.length) }
    };

    let salesStaffCount = 0, accountStaffCount = 0, productStaffCount = 0;

    // --- UI & DISPLAY FUNCTIONS ---
    function updateGlobalStats() {
      document.getElementById('globalLeadCount').textContent = leads;
      document.getElementById('globalMoneyCount').textContent = money.toFixed(2);
      document.getElementById('globalRate').textContent = passiveIncome.toFixed(2);
    }

    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(screen => screen.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      
      const navButtons = document.querySelectorAll('#nav-buttons button');
      navButtons.forEach(btn => {
          btn.classList.remove('bg-blue-500', 'text-white');
          btn.classList.add('bg-gray-200', 'text-gray-700');
      });
      
      const activeButton = Array.from(navButtons).find(btn => btn.getAttribute('onclick') === `showScreen('${id}')`);
      if(activeButton) {
          activeButton.classList.add('bg-blue-500', 'text-white');
          activeButton.classList.remove('bg-gray-200', 'text-gray-700');
      }
    }

    // --- CORE GAME LOGIC ---
    function tryGenerateLead() {
      const clicks = upgrades.corporateCulture.purchased ? 2 : 1;
      for (let i = 0; i < clicks; i++) {
        if (Math.random() < leadGenerationChance) {
            leads++;
            document.getElementById('leadCount').textContent = leads;
        }
        if (Math.random() < upgrades.aggressiveFollowup.chance) {
            developLead(false); // Call develop lead without the click animation part
        }
        if (emailCharIndex >= emailContent.length) {
            emailCharIndex = 0;
            document.getElementById('emailText').textContent = '';
        }
        document.getElementById('emailText').textContent += emailContent.charAt(emailCharIndex++);
      }
      updateGlobalStats();
    }

    function developLead(isManualClick = true) {
      if (leads <= 0) return;
      
      let clicks = 1;
      if (isManualClick) {
        clicks *= upgrades.secondMonitor.purchased ? 2 : 1;
        clicks *= upgrades.corporateCulture.purchased ? 2 : 1;
      }
      
      developClicks += clicks;

      document.getElementById('progressBar').style.width = (developClicks / clicksToDevelopLead * 100) + "%";
      if (developClicks >= clicksToDevelopLead) {
        let incomeFromLead = incomePerLead;
        if (upgrades.sycGlobal.purchased) {
            incomeFromLead *= upgrades.sycGlobal.multiplier;
        }
        passiveIncome += incomeFromLead;
        developClicks = 0;
        leads--;
        document.getElementById('leadCount').textContent = leads;
        document.getElementById('progressBar').style.width = "0%";
      }
      if (isManualClick) {
        if (adCharIndex >= adScriptContent.length) {
            adCharIndex = 0;
            document.getElementById('adScriptText').textContent = '';
        }
        document.getElementById('adScriptText').textContent += adScriptContent.charAt(adCharIndex++);
      }
      updateGlobalStats();
    }

    function updateMoney() {
      const incomeThisTick = passiveIncome;
      money += incomeThisTick;
      totalMoneyEarned += incomeThisTick;
      document.getElementById('moneyCount').textContent = money.toFixed(2);
      updateGlobalStats();
      checkAchievements();
    }

    function hireStaff(name, type, button) {
      if (hiredStaff.has(name)) return;
      let cost;
      if (type === 'sales') cost = Math.ceil(5 * Math.pow(1.6, salesStaffCount));
      else if (type === 'accounts') cost = Math.ceil(10 * Math.pow(1.6, accountStaffCount));
      else if (type === 'products') cost = 100;

      if (money < cost) {
        alert("Not enough money to hire " + name);
        return;
      }
      money -= cost;
      button.disabled = true;
      button.textContent = `Hired`;
      button.classList.add('bg-gray-400', 'cursor-not-allowed');
      
      const li = document.createElement('li');
      li.textContent = `${name} (${type})`;
      li.className = 'text-gray-700';
      document.getElementById('hiredStaffList').appendChild(li);

      hiredStaff.add(name);
      if (type === 'sales') {
        salesStaffCount++;
        setInterval(tryGenerateLead, 500);
      } else if (type === 'accounts') {
        accountStaffCount++;
        setInterval(() => developLead(false), 500);
      } else if (type === 'products') {
        productStaffCount++;
        passiveIncome += 5;
      }
      updateStaffButtonPrices();
      updateGlobalStats();
      checkUnlocks();
      checkAchievements();
    }
    
    function checkUnlocks() {
        if (hiredStaff.has('Artyom')) {
            staffMembers.sales.forEach(name => {
                if (name !== 'Artyom' && staffButtons[name]) staffButtons[name].style.display = 'inline-block';
            });
        }
        if (hiredStaff.has('Azret')) {
            if(staffButtons['Asiya']) staffButtons['Asiya'].style.display = 'inline-block';
        }
        if (hiredStaff.has('Azret') && hiredStaff.has('Asiya')) {
            staffMembers.accounts.forEach(name => {
                if (name !== 'Azret' && name !== 'Asiya' && staffButtons[name]) staffButtons[name].style.display = 'inline-block';
            });
        }
        const allSalesHired = staffMembers.sales.every(name => hiredStaff.has(name));
        const allAccountsHired = staffMembers.accounts.every(name => hiredStaff.has(name));
        if (allSalesHired && allAccountsHired && !hiredStaff.has('Emil') && !staffButtons['Emil']) {
            const btn = createStaffButton('Emil', 'products');
            document.getElementById('productsStaffList').appendChild(btn);
            updateStaffButtonPrices();
        }
    }

    function updateStaffButtonPrices() {
      for (const name in staffButtons) {
        if (hiredStaff.has(name)) continue;
        const btn = staffButtons[name];
        let type = 'products';
        let currentCount = 0;
        if (staffMembers.sales.includes(name)) {
            type = 'sales';
            currentCount = salesStaffCount;
        } else if (staffMembers.accounts.includes(name)) {
            type = 'accounts';
            currentCount = accountStaffCount;
        }

        const cost = type === 'sales' ? Math.ceil(5 * Math.pow(1.6, currentCount))
          : type === 'accounts' ? Math.ceil(10 * Math.pow(1.6, currentCount))
          : 100;
        btn.textContent = `Hire ${name} ($${cost})`;
      }
    }

    function createStaffButton(name, type) {
        const btn = document.createElement('button');
        btn.className = 'px-3 py-1.5 rounded-md bg-yellow-400 text-yellow-900 font-semibold hover:bg-yellow-500 text-sm';
        staffButtons[name] = btn;
        btn.onclick = () => hireStaff(name, type, btn);
        return btn;
    }

    function createInitialStaffButtons() {
        staffMembers.sales.forEach(name => {
            const btn = createStaffButton(name, 'sales');
            if (name !== 'Artyom') btn.style.display = 'none';
            document.getElementById('salesStaffList').appendChild(btn);
        });
        staffMembers.accounts.forEach(name => {
            const btn = createStaffButton(name, 'accounts');
            if (name !== 'Azret') btn.style.display = 'none';
            document.getElementById('accountsStaffList').appendChild(btn);
        });
        updateStaffButtonPrices();
    }

    // --- UPGRADE LOGIC ---
    function buyUpgrade(upgradeKey, renderFunc) {
        const upgrade = upgrades[upgradeKey];
        if (money < upgrade.cost) {
            alert("Not enough money!");
            return false;
        }
        money -= upgrade.cost;
        return true;
    }

    function buyBetterLeadForms() {
        const upgrade = upgrades.betterLeadForms;
        if (!buyUpgrade('betterLeadForms')) return;
        upgrade.level++;
        upgrade.cost *= upgrade.costMultiplier;
        leadGenerationChance += upgrade.chanceIncrease;
        renderSalesUpgrades();
        updateGlobalStats();
    }

    function buyReferralProgram() {
        const upgrade = upgrades.referralProgram;
        if (!buyUpgrade('referralProgram')) return;
        upgrade.level++;
        upgrade.cost *= upgrade.costMultiplier;
        if (upgrade.interval) clearInterval(upgrade.interval);
        upgrade.interval = setInterval(() => { leads++; updateGlobalStats(); }, 10000);
        renderSalesUpgrades();
        updateGlobalStats();
    }

    function buyAggressiveFollowup() {
        const upgrade = upgrades.aggressiveFollowup;
        if (!buyUpgrade('aggressiveFollowup')) return;
        upgrade.level++;
        upgrade.cost *= upgrade.costMultiplier;
        upgrade.chance += 0.05;
        renderSalesUpgrades();
        updateGlobalStats();
    }
    
    function buyAsiyasHelp() {
        const upgrade = upgrades.asiyasHelp;
        if (clicksToDevelopLead <= 10) { alert("Maxed out!"); return; }
        if (!buyUpgrade('asiyasHelp')) return;
        upgrade.level++;
        upgrade.cost *= upgrade.costMultiplier;
        clicksToDevelopLead -= upgrade.clicksReduction;
        if (clicksToDevelopLead < 10) clicksToDevelopLead = 10;
        renderAccountsUpgrades();
        updateGlobalStats();
    }

    function buySecondMonitor() {
        const upgrade = upgrades.secondMonitor;
        if (upgrade.purchased) return;
        if (!buyUpgrade('secondMonitor')) return;
        upgrade.purchased = true;
        renderAccountsUpgrades();
        updateGlobalStats();
    }

    function buyNewAdNetworks() {
        const upgrade = upgrades.newAdNetworks;
        if (!buyUpgrade('newAdNetworks')) return;
        upgrade.level++;
        upgrade.cost *= upgrade.costMultiplier;
        incomePerLead += upgrade.incomeBonus;
        renderAccountsUpgrades();
        updateGlobalStats();
    }

    function buyNytPuzzles() {
        const upgrade = upgrades.nytPuzzles;
        if (upgrade.purchased) return;
        if (!buyUpgrade('nytPuzzles')) return;
        upgrade.purchased = true;
        upgrades.betterLeadForms.chanceIncrease *= upgrade.multiplier;
        upgrades.asiyasHelp.clicksReduction = Math.round(upgrades.asiyasHelp.clicksReduction * upgrade.multiplier);
        renderSalesUpgrades();
        renderAccountsUpgrades();
        renderGlobalUpgrades();
        updateGlobalStats();
    }

    function buyCorporateCulture() {
        const upgrade = upgrades.corporateCulture;
        if (upgrade.purchased) return;
        if (!buyUpgrade('corporateCulture')) return;
        upgrade.purchased = true;
        renderGlobalUpgrades();
        updateGlobalStats();
    }

    function buySycGlobal() {
        const upgrade = upgrades.sycGlobal;
        if (upgrade.purchased) return;
        if (!buyUpgrade('sycGlobal')) return;
        upgrade.purchased = true;
        renderGlobalUpgrades();
        updateGlobalStats();
    }

    function buyCoffeeMachine() {
        const upgrade = upgrades.coffeeMachine;
        if (upgrade.purchased) return;
        if (!buyUpgrade('coffeeMachine')) return;
        upgrade.purchased = true;
        
        const genLeadBtn = document.getElementById('generateLeadBtn');
        const devLeadBtn = document.getElementById('developLeadBtn');

        genLeadBtn.onmousedown = () => startHold(tryGenerateLead);
        genLeadBtn.onmouseup = stopHold;
        genLeadBtn.onmouseleave = stopHold;

        devLeadBtn.onmousedown = () => startHold(developLead);
        devLeadBtn.onmouseup = stopHold;
        devLeadBtn.onmouseleave = stopHold;

        renderGlobalUpgrades();
        updateGlobalStats();
    }

    function startHold(action) {
        if (holdInterval) clearInterval(holdInterval);
        action(); // Fire once immediately
        holdInterval = setInterval(action, 100);
    }

    function stopHold() {
        clearInterval(holdInterval);
    }
    
    // --- ACHIEVEMENT LOGIC ---
    function checkAchievements() {
        for (const key in achievements) {
            const ach = achievements[key];
            if (!ach.unlocked && ach.condition()) {
                ach.unlocked = true;
                showAchievementPopup(ach);
                renderAchievements();
            }
        }
    }

    function showAchievementPopup(achievement) {
        const popup = document.getElementById('achievement-popup');
        document.getElementById('achievement-title').textContent = achievement.name;
        document.getElementById('achievement-desc').textContent = achievement.description;
        
        popup.classList.remove('opacity-0', 'translate-y-10');
        popup.classList.add('opacity-100', 'translate-y-0');

        setTimeout(() => {
            popup.classList.remove('opacity-100', 'translate-y-0');
            popup.classList.add('opacity-0', 'translate-y-10');
        }, 4000);
    }

    function renderAchievements() {
        const container = document.getElementById('achievementsList');
        container.innerHTML = '';
        for (const key in achievements) {
            const ach = achievements[key];
            const item = document.createElement('div');
            item.className = 'p-4 rounded-lg shadow-sm';
            if (ach.unlocked) {
                item.classList.add('bg-yellow-100', 'border', 'border-yellow-400');
                item.innerHTML = `<h4 class="font-bold text-yellow-800">${ach.name}</h4><p class="text-sm text-yellow-700">${ach.description}</p>`;
            } else {
                item.classList.add('bg-gray-200');
                item.innerHTML = `<h4 class="font-bold text-gray-500">Locked Achievement</h4><p class="text-sm text-gray-400">???</p>`;
            }
            container.appendChild(item);
        }
    }
    
    // --- RENDER UPGRADES ---
    function createUpgradeElement(details) {
        const item = document.createElement('div');
        item.className = 'bg-gray-50 p-4 rounded-lg shadow-sm flex justify-between items-center';
        item.innerHTML = `
            <div>
              <h4 class="font-bold text-lg">${details.name} ${details.level !== undefined ? `<span class="text-sm font-normal bg-gray-200 text-gray-700 px-2 py-0.5 rounded-full">${details.level}</span>` : ''}</h4>
              ${details.desc.map(d => `<p class="text-sm text-gray-600">${d}</p>`).join('')}
            </div>
            <div class="text-right flex-shrink-0 ml-4">
              <button class="px-4 py-2 rounded-md ${details.buttonClass} text-white font-semibold ${details.buttonHover}">Buy</button>
              <p class="text-sm font-semibold mt-1">Cost: $${details.cost.toFixed(2)}</p>
            </div>
        `;
        const button = item.querySelector('button');
        button.onclick = details.onclick;
        if (details.isMaxed || details.isPurchased) {
            button.disabled = true;
            button.textContent = details.isPurchased ? 'Purchased' : 'Maxed';
            button.className = 'px-4 py-2 rounded-md bg-gray-400 cursor-not-allowed text-white font-semibold';
        }
        return item;
    }

    function renderSalesUpgrades() {
      const container = document.getElementById('salesUpgradesList');
      container.innerHTML = '';
      
      // Better Lead Forms
      const blf = upgrades.betterLeadForms;
      container.appendChild(createUpgradeElement({
          name: 'Better Lead Forms', level: blf.level,
          desc: [`Increases manual lead generation chance by ${(blf.chanceIncrease * 100).toFixed(2)}pp.`, `Current total chance: ${(leadGenerationChance * 100).toFixed(2)}%`],
          cost: blf.cost, onclick: buyBetterLeadForms, buttonClass: 'bg-green-500', buttonHover: 'hover:bg-green-600'
      }));

      // Referral Program
      const rp = upgrades.referralProgram;
      container.appendChild(createUpgradeElement({
          name: 'Referral Program', level: rp.level,
          desc: [`Passively generate ${rp.level} lead(s) every 10 seconds.`],
          cost: rp.cost, onclick: buyReferralProgram, buttonClass: 'bg-green-500', buttonHover: 'hover:bg-green-600'
      }));

      // Aggressive Followup
      const af = upgrades.aggressiveFollowup;
      container.appendChild(createUpgradeElement({
          name: 'Aggressive Followup', level: af.level,
          desc: [`+5% chance per click to instantly develop a lead.`, `Current chance: ${(af.chance * 100).toFixed(0)}%`],
          cost: af.cost, onclick: buyAggressiveFollowup, buttonClass: 'bg-green-500', buttonHover: 'hover:bg-green-600'
      }));
    }

    function renderAccountsUpgrades() {
        const container = document.getElementById('accountsUpgradesList');
        container.innerHTML = '';

        // Asiya's Help
        const ah = upgrades.asiyasHelp;
        container.appendChild(createUpgradeElement({
            name: 'Asiya’s Help', level: ah.level,
            desc: [`Reduces clicks needed to develop a lead by ${ah.clicksReduction}.`, `Current clicks needed: ${clicksToDevelopLead}`],
            cost: ah.cost, onclick: buyAsiyasHelp, buttonClass: 'bg-indigo-500', buttonHover: 'hover:bg-indigo-600', isMaxed: clicksToDevelopLead <= 10
        }));

        // 2nd Monitor
        const sm = upgrades.secondMonitor;
        container.appendChild(createUpgradeElement({
            name: '2nd Monitor',
            desc: [`Each manual click on "Develop Lead" counts as two.`],
            cost: sm.cost, onclick: buySecondMonitor, buttonClass: 'bg-indigo-500', buttonHover: 'hover:bg-indigo-600', isPurchased: sm.purchased
        }));

        // New Ad Networks
        const nan = upgrades.newAdNetworks;
        container.appendChild(createUpgradeElement({
            name: 'New Ad Networks', level: nan.level,
            desc: [`Each developed lead earns +$${nan.incomeBonus.toFixed(2)} more.`, `Current income per lead: $${incomePerLead.toFixed(2)}`],
            cost: nan.cost, onclick: buyNewAdNetworks, buttonClass: 'bg-indigo-500', buttonHover: 'hover:bg-indigo-600'
        }));
    }
    
    function renderGlobalUpgrades() {
        const container = document.getElementById('globalUpgradesList');
        container.innerHTML = '';

        // NYT Puzzles
        const nyt = upgrades.nytPuzzles;
        container.appendChild(createUpgradeElement({
            name: 'NYT Puzzles',
            desc: [`Boosts Sales/Account upgrade effectiveness by x${nyt.multiplier}.`, `One-time purchase.`],
            cost: nyt.cost, onclick: buyNytPuzzles, buttonClass: 'bg-purple-500', buttonHover: 'hover:bg-purple-600', isPurchased: nyt.purchased
        }));

        // Corporate Culture
        const cc = upgrades.corporateCulture;
        container.appendChild(createUpgradeElement({
            name: 'Corporate Culture',
            desc: [`All manual clicks count as two.`, `One-time purchase.`],
            cost: cc.cost, onclick: buyCorporateCulture, buttonClass: 'bg-purple-500', buttonHover: 'hover:bg-purple-600', isPurchased: cc.purchased
        }));

        // СУЦ
        const syc = upgrades.sycGlobal;
        container.appendChild(createUpgradeElement({
            name: 'СУЦ',
            desc: [`All income from developing leads is increased by 20%.`, `One-time purchase.`],
            cost: syc.cost, onclick: buySycGlobal, buttonClass: 'bg-purple-500', buttonHover: 'hover:bg-purple-600', isPurchased: syc.purchased
        }));

        // Coffee Machine
        const cm = upgrades.coffeeMachine;
        container.appendChild(createUpgradeElement({
            name: 'Coffee Machine',
            desc: [`Allows holding down the mouse button to click rapidly.`, `One-time purchase.`],
            cost: cm.cost, onclick: buyCoffeeMachine, buttonClass: 'bg-purple-500', buttonHover: 'hover:bg-purple-600', isPurchased: cm.purchased
        }));
    }

    // --- INITIALIZE GAME ---
    function initialize() {
        createInitialStaffButtons();
        renderSalesUpgrades();
        renderAccountsUpgrades();
        renderGlobalUpgrades();
        renderAchievements();
        setInterval(updateMoney, 1000);
        updateGlobalStats();
    }

    // Run the game
    window.onload = initialize;
  </script>
</body>
</html>
