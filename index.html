<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monetization Simulator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .screen {
        display: none;
    }
    .active {
        display: block;
    }
    #achievement-popup {
        transition: opacity 0.5s, transform 0.5s;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- Main Container -->
  <div class="container mx-auto max-w-4xl p-4">

    <!-- Header -->
    <header class="bg-gray-800 text-white p-4 rounded-lg shadow-lg mb-4">
      <h1 class="text-3xl font-bold text-center">Monetization Simulator</h1>
    </header>

    <!-- Global Stats Bar -->
    <div class="bg-gray-900 text-white p-3 rounded-lg shadow-md mb-4 sticky top-2 z-50 flex justify-around items-center text-center">
      <div>
        <span class="text-sm text-gray-400">Leads</span>
        <p class="text-xl font-semibold" id="globalLeadCount">0</p>
      </div>
      <div>
        <span class="text-sm text-gray-400">Money</span>
        <p class="text-xl font-semibold">$<span id="globalMoneyCount">0.00</span></p>
      </div>
      <div>
        <span class="text-sm text-gray-400">Rate</span>
        <p class="text-xl font-semibold">$<span id="globalRate">0.00</span>/s</p>
      </div>
    </div>

    <!-- Navigation Tabs -->
    <div id="nav-buttons" class="bg-white rounded-lg shadow-md p-2 mb-4 flex flex-wrap justify-center gap-2">
      <button onclick="showScreen('salesScreen')" class="px-4 py-2 rounded-md bg-blue-500 text-white font-semibold hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400">Sales</button>
      <button onclick="showScreen('accountScreen')" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Accounts</button>
      <button onclick="showScreen('staffScreen')" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Staff</button>
      <button onclick="showScreen('upgradesScreen')" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Upgrades</button>
      <button onclick="showScreen('achievementsScreen')" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Achievements</button>
    </div>

    <!-- Sales Screen -->
    <div id="salesScreen" class="screen active p-4 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Sales Screen</h2>
      <button class="w-full md:w-auto px-6 py-3 rounded-lg bg-green-500 text-white font-bold text-lg shadow-md hover:bg-green-600 transition-transform transform hover:scale-105" onclick="tryGenerateLead()">Generate Lead</button>
      <div class="mt-4 text-xl">Leads: <span id="leadCount" class="font-bold">0</span></div>
      <div id="emailText" class="mt-4 p-4 h-48 bg-gray-900 text-green-400 font-mono rounded-lg overflow-y-auto text-left whitespace-pre-wrap shadow-inner"></div>
    </div>

    <!-- Accounts Screen -->
    <div id="accountScreen" class="screen p-4 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Accounts Screen</h2>
      <button class="w-full md:w-auto px-6 py-3 rounded-lg bg-indigo-500 text-white font-bold text-lg shadow-md hover:bg-indigo-600 transition-transform transform hover:scale-105" id="developBtn" onclick="developLead()">Develop Lead</button>
      <div class="w-full bg-gray-200 rounded-full h-6 mt-4 overflow-hidden shadow-inner">
        <div id="progressBar" class="bg-indigo-600 h-6 rounded-full transition-all duration-200" style="width: 0%"></div>
      </div>
      <div class="mt-4 text-xl">Money: $<span id="moneyCount" class="font-bold">0.00</span></div>
      <div id="adScriptText" class="mt-4 p-4 h-48 bg-gray-900 text-cyan-400 font-mono rounded-lg overflow-y-auto text-left whitespace-pre-wrap shadow-inner"></div>
    </div>

    <!-- Staff Screen -->
    <div id="staffScreen" class="screen p-4 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Staff</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <h3 class="text-xl font-semibold mb-2">Hired Staff</h3>
            <ul id="hiredStaffList" class="list-disc list-inside bg-gray-100 p-3 rounded-lg min-h-[100px]"></ul>
        </div>
        <div>
            <div class="staff-category mb-4">
              <h3 class="text-xl font-semibold mb-2">Sales</h3>
              <div class="staff-list flex flex-wrap gap-2" id="salesStaffList"></div>
            </div>
            <div class="staff-category mb-4">
              <h3 class="text-xl font-semibold mb-2">Accounts</h3>
              <div class="staff-list flex flex-wrap gap-2" id="accountsStaffList"></div>
            </div>
            <div class="staff-category">
              <h3 class="text-xl font-semibold mb-2">Products</h3>
              <div class="staff-list flex flex-wrap gap-2" id="productsStaffList"></div>
            </div>
        </div>
      </div>
    </div>

    <!-- Upgrades Screen -->
    <div id="upgradesScreen" class="screen p-4 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-4">Upgrades</h2>
        <div class="upgrade-category mb-6">
            <h3 class="text-xl font-semibold border-b-2 border-gray-200 pb-2 mb-3">Sales Upgrades</h3>
            <div id="salesUpgradesList" class="space-y-3"></div>
        </div>
        <div class="upgrade-category mb-6">
            <h3 class="text-xl font-semibold border-b-2 border-gray-200 pb-2 mb-3">Accounts Upgrades</h3>
            <div id="accountsUpgradesList" class="space-y-3"></div>
        </div>
        <div class="upgrade-category">
            <h3 class="text-xl font-semibold border-b-2 border-gray-200 pb-2 mb-3">Global Upgrades</h3>
            <div id="globalUpgradesList" class="space-y-3"></div>
        </div>
    </div>
    
    <!-- Achievements Screen -->
    <div id="achievementsScreen" class="screen p-4 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-4">Achievements</h2>
        <div id="achievementsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Achievements will be rendered here -->
        </div>
    </div>

  </div>
  
  <!-- Achievement Popup -->
  <div id="achievement-popup" class="fixed bottom-5 right-5 bg-gray-900 text-white p-4 rounded-lg shadow-2xl opacity-0 transform translate-y-10 pointer-events-none">
      <h3 class="font-bold text-lg text-yellow-400" id="achievement-title"></h3>
      <p class="text-sm" id="achievement-desc"></p>
  </div>


  <script>
    // --- GAME STATE VARIABLES ---
    let leads = 0, money = 0, developClicks = 0, passiveIncome = 0, totalMoneyEarned = 0;
    let emailCharIndex = 0, adCharIndex = 0;
    let leadGenerationChance = 0.01; // Base 1% chance
    let clicksToDevelopLead = 100; // Clicks needed to convert a lead

    // --- CONTENT & CONFIG ---
    const emailContent = `Dear Valued Client,\n\nWe hope this message finds you well. I'm writing to follow up on our previous conversation regarding the exciting monetization opportunities available to you...`;
    const adScriptContent = `// Monetization Script\nfunction showAd() {\n  const ad = document.createElement('div');\n  ad.className = 'ad-banner';\n  ad.innerText = 'This space is monetized!';\n  document.body.appendChild(ad);\n}\nsetInterval(showAd, 5000);`;
    const hiredStaff = new Set();
    const staffButtons = {};
    const staffMembers = {
      sales: ['Artyom', 'Alan', 'Aruna', 'Dora', 'Syrym'],
      accounts: ['Azret', 'Asiya', 'Danil', 'Aizhan', 'Amir', 'Akzhan'],
      products: ['Emil']
    };

    const upgrades = {
      betterLeadForms: { level: 0, cost: 1, costMultiplier: 5, chanceIncrease: 0.001 },
      asiyasHelp: { level: 0, cost: 5, costMultiplier: 5, clicksReduction: 10 },
      nytPuzzles: { purchased: false, cost: 15, multiplier: 1.5 }
    };
    
    const achievements = {
        mukhtarSatisfied: { name: "Mukhtar is satisfied", description: "Earn $50 total.", unlocked: false, condition: () => totalMoneyEarned >= 50 },
        mukhtarHappy: { name: "Mukhtar is happy", description: "Earn $100 total.", unlocked: false, condition: () => totalMoneyEarned >= 100 },
        mukhtarReallyHappy: { name: "Mukhtar is REALLY happy", description: "Earn $1,000 total.", unlocked: false, condition: () => totalMoneyEarned >= 1000 },
        someonePromoted: { name: "Someone is getting promoted", description: "Earn $5,000 total.", unlocked: false, condition: () => totalMoneyEarned >= 5000 },
        syc: { name: "100% СУЦ", description: "Earn $10,000 total.", unlocked: false, condition: () => totalMoneyEarned >= 10000 },
        buyMyUSDT: { name: "Buy my USDT", description: "Hire Emil.", unlocked: false, condition: () => hiredStaff.has('Emil') },
        shapkaGang: { name: "Шапка gang", description: "Hire all staff.", unlocked: false, condition: () => hiredStaff.size === (staffMembers.sales.length + staffMembers.accounts.length + staffMembers.products.length) }
    };

    let salesStaffCount = 0, accountStaffCount = 0, productStaffCount = 0;

    // --- UI & DISPLAY FUNCTIONS ---
    function updateGlobalStats() {
      document.getElementById('globalLeadCount').textContent = leads;
      document.getElementById('globalMoneyCount').textContent = money.toFixed(2);
      document.getElementById('globalRate').textContent = passiveIncome.toFixed(2);
    }

    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(screen => screen.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      
      const navButtons = document.querySelectorAll('#nav-buttons button');
      navButtons.forEach(btn => {
          btn.classList.remove('bg-blue-500', 'text-white');
          btn.classList.add('bg-gray-200', 'text-gray-700');
      });
      
      const activeButton = Array.from(navButtons).find(btn => btn.getAttribute('onclick') === `showScreen('${id}')`);
      if(activeButton) {
          activeButton.classList.add('bg-blue-500', 'text-white');
          activeButton.classList.remove('bg-gray-200', 'text-gray-700');
      }
    }

    // --- CORE GAME LOGIC ---
    function tryGenerateLead() {
      if (Math.random() < leadGenerationChance) {
        leads++;
        document.getElementById('leadCount').textContent = leads;
      }
      if (emailCharIndex >= emailContent.length) {
        emailCharIndex = 0;
        document.getElementById('emailText').textContent = '';
      }
      document.getElementById('emailText').textContent += emailContent.charAt(emailCharIndex++);
      updateGlobalStats();
    }

    function developLead() {
      if (leads <= 0) return;
      developClicks++;
      document.getElementById('progressBar').style.width = (developClicks / clicksToDevelopLead * 100) + "%";
      if (developClicks >= clicksToDevelopLead) {
        passiveIncome += 0.01;
        developClicks = 0;
        leads--;
        document.getElementById('leadCount').textContent = leads;
        document.getElementById('progressBar').style.width = "0%";
      }
      if (adCharIndex >= adScriptContent.length) {
        adCharIndex = 0;
        document.getElementById('adScriptText').textContent = '';
      }
      document.getElementById('adScriptText').textContent += adScriptContent.charAt(adCharIndex++);
      updateGlobalStats();
    }

    function updateMoney() {
      const incomeThisTick = passiveIncome;
      money += incomeThisTick;
      totalMoneyEarned += incomeThisTick;
      document.getElementById('moneyCount').textContent = money.toFixed(2);
      updateGlobalStats();
      checkAchievements();
    }

    function hireStaff(name, type, button) {
      if (hiredStaff.has(name)) return;
      let cost;
      if (type === 'sales') cost = Math.ceil(5 * Math.pow(1.6, salesStaffCount));
      else if (type === 'accounts') cost = Math.ceil(10 * Math.pow(1.6, accountStaffCount));
      else if (type === 'products') cost = 100;

      if (money < cost) {
        alert("Not enough money to hire " + name);
        return;
      }
      money -= cost;
      button.disabled = true;
      button.textContent = `Hired`;
      button.classList.add('bg-gray-400', 'cursor-not-allowed');
      
      const li = document.createElement('li');
      li.textContent = `${name} (${type})`;
      li.className = 'text-gray-700';
      document.getElementById('hiredStaffList').appendChild(li);

      hiredStaff.add(name);
      if (type === 'sales') {
        salesStaffCount++;
        setInterval(tryGenerateLead, 500);
      } else if (type === 'accounts') {
        accountStaffCount++;
        setInterval(developLead, 500);
      } else if (type === 'products') {
        productStaffCount++;
        passiveIncome += 5;
      }
      updateStaffButtonPrices();
      updateGlobalStats();
      checkUnlocks();
      checkAchievements();
    }
    
    function checkUnlocks() {
        if (hiredStaff.has('Artyom')) {
            staffMembers.sales.forEach(name => {
                if (name !== 'Artyom' && staffButtons[name]) staffButtons[name].style.display = 'inline-block';
            });
        }
        if (hiredStaff.has('Azret')) {
            if(staffButtons['Asiya']) staffButtons['Asiya'].style.display = 'inline-block';
        }
        if (hiredStaff.has('Azret') && hiredStaff.has('Asiya')) {
            staffMembers.accounts.forEach(name => {
                if (name !== 'Azret' && name !== 'Asiya' && staffButtons[name]) staffButtons[name].style.display = 'inline-block';
            });
        }
        const allSalesHired = staffMembers.sales.every(name => hiredStaff.has(name));
        const allAccountsHired = staffMembers.accounts.every(name => hiredStaff.has(name));
        if (allSalesHired && allAccountsHired && !hiredStaff.has('Emil') && !staffButtons['Emil']) {
            const btn = createStaffButton('Emil', 'products');
            document.getElementById('productsStaffList').appendChild(btn);
            updateStaffButtonPrices();
        }
    }

    function updateStaffButtonPrices() {
      for (const name in staffButtons) {
        if (hiredStaff.has(name)) continue;
        const btn = staffButtons[name];
        let type = 'products';
        let currentCount = 0;
        if (staffMembers.sales.includes(name)) {
            type = 'sales';
            currentCount = salesStaffCount;
        } else if (staffMembers.accounts.includes(name)) {
            type = 'accounts';
            currentCount = accountStaffCount;
        }

        const cost = type === 'sales' ? Math.ceil(5 * Math.pow(1.6, currentCount))
          : type === 'accounts' ? Math.ceil(10 * Math.pow(1.6, currentCount))
          : 100;
        btn.textContent = `Hire ${name} ($${cost})`;
      }
    }

    function createStaffButton(name, type) {
        const btn = document.createElement('button');
        btn.className = 'px-3 py-1.5 rounded-md bg-yellow-400 text-yellow-900 font-semibold hover:bg-yellow-500 text-sm';
        staffButtons[name] = btn;
        btn.onclick = () => hireStaff(name, type, btn);
        return btn;
    }

    function createInitialStaffButtons() {
        staffMembers.sales.forEach(name => {
            const btn = createStaffButton(name, 'sales');
            if (name !== 'Artyom') btn.style.display = 'none';
            document.getElementById('salesStaffList').appendChild(btn);
        });
        staffMembers.accounts.forEach(name => {
            const btn = createStaffButton(name, 'accounts');
            if (name !== 'Azret') btn.style.display = 'none';
            document.getElementById('accountsStaffList').appendChild(btn);
        });
        updateStaffButtonPrices();
    }

    // --- UPGRADE LOGIC ---
    function buyBetterLeadForms() {
      const upgrade = upgrades.betterLeadForms;
      if (money >= upgrade.cost) {
        money -= upgrade.cost;
        upgrade.level++;
        upgrade.cost *= upgrade.costMultiplier;
        leadGenerationChance += upgrade.chanceIncrease;
        renderSalesUpgrades();
        updateGlobalStats();
      } else { alert("Not enough money!"); }
    }
    
    function buyAsiyasHelp() {
        const upgrade = upgrades.asiyasHelp;
        if (money >= upgrade.cost) {
            if (clicksToDevelopLead <= 10) { alert("Maxed out!"); return; }
            money -= upgrade.cost;
            upgrade.level++;
            upgrade.cost *= upgrade.costMultiplier;
            clicksToDevelopLead -= upgrade.clicksReduction;
            if (clicksToDevelopLead < 10) clicksToDevelopLead = 10;
            renderAccountsUpgrades();
            updateGlobalStats();
        } else { alert("Not enough money!"); }
    }

    function buyNytPuzzles() {
        const upgrade = upgrades.nytPuzzles;
        if (upgrade.purchased) return;
        if (money >= upgrade.cost) {
            money -= upgrade.cost;
            upgrade.purchased = true;
            upgrades.betterLeadForms.chanceIncrease *= upgrade.multiplier;
            upgrades.asiyasHelp.clicksReduction = Math.round(upgrades.asiyasHelp.clicksReduction * upgrade.multiplier);
            renderSalesUpgrades();
            renderAccountsUpgrades();
            renderGlobalUpgrades();
            updateGlobalStats();
        } else { alert("Not enough money!"); }
    }
    
    // --- ACHIEVEMENT LOGIC ---
    function checkAchievements() {
        for (const key in achievements) {
            const ach = achievements[key];
            if (!ach.unlocked && ach.condition()) {
                ach.unlocked = true;
                showAchievementPopup(ach);
                renderAchievements();
            }
        }
    }

    function showAchievementPopup(achievement) {
        const popup = document.getElementById('achievement-popup');
        document.getElementById('achievement-title').textContent = achievement.name;
        document.getElementById('achievement-desc').textContent = achievement.description;
        
        popup.classList.remove('opacity-0', 'translate-y-10');
        popup.classList.add('opacity-100', 'translate-y-0');

        setTimeout(() => {
            popup.classList.remove('opacity-100', 'translate-y-0');
            popup.classList.add('opacity-0', 'translate-y-10');
        }, 4000);
    }

    function renderAchievements() {
        const container = document.getElementById('achievementsList');
        container.innerHTML = '';
        for (const key in achievements) {
            const ach = achievements[key];
            const item = document.createElement('div');
            item.className = 'p-4 rounded-lg shadow-sm';
            if (ach.unlocked) {
                item.classList.add('bg-yellow-100', 'border', 'border-yellow-400');
                item.innerHTML = `
                    <h4 class="font-bold text-yellow-800">${ach.name}</h4>
                    <p class="text-sm text-yellow-700">${ach.description}</p>
                `;
            } else {
                item.classList.add('bg-gray-200');
                item.innerHTML = `
                    <h4 class="font-bold text-gray-500">Locked Achievement</h4>
                    <p class="text-sm text-gray-400">???</p>
                `;
            }
            container.appendChild(item);
        }
    }

    // --- RENDER UPGRADES ---
    function renderSalesUpgrades() {
      const container = document.getElementById('salesUpgradesList');
      const upgrade = upgrades.betterLeadForms;
      container.innerHTML = ''; 
      const item = document.createElement('div');
      item.className = 'bg-gray-50 p-4 rounded-lg shadow-sm flex justify-between items-center';
      const currentChance = (leadGenerationChance * 100).toFixed(2);
      const increasePerLevel = (upgrade.chanceIncrease * 100).toFixed(2);
      item.innerHTML = `<div><h4 class="font-bold text-lg">Better Lead Forms <span class="text-sm font-normal bg-gray-200 text-gray-700 px-2 py-0.5 rounded-full">${upgrade.level}</span></h4><p class="text-sm text-gray-600">Increases manual lead generation chance by ${increasePerLevel}pp.</p><p class="text-sm text-gray-600">Current total chance: ${currentChance}%</p></div><div class="text-right"><button class="px-4 py-2 rounded-md bg-green-500 text-white font-semibold hover:bg-green-600">Buy</button><p class="text-sm font-semibold mt-1">Cost: $${upgrade.cost.toFixed(2)}</p></div>`;
      item.querySelector('button').onclick = buyBetterLeadForms;
      container.appendChild(item);
    }

    function renderAccountsUpgrades() {
        const container = document.getElementById('accountsUpgradesList');
        const upgrade = upgrades.asiyasHelp;
        container.innerHTML = '';
        const item = document.createElement('div');
        item.className = 'bg-gray-50 p-4 rounded-lg shadow-sm flex justify-between items-center';
        item.innerHTML = `<div><h4 class="font-bold text-lg">Asiya’s Help <span class="text-sm font-normal bg-gray-200 text-gray-700 px-2 py-0.5 rounded-full">${upgrade.level}</span></h4><p class="text-sm text-gray-600">Reduces clicks needed to develop a lead by ${upgrade.clicksReduction}.</p><p class="text-sm text-gray-600">Current clicks needed: ${clicksToDevelopLead}</p></div><div class="text-right"><button class="px-4 py-2 rounded-md bg-indigo-500 text-white font-semibold hover:bg-indigo-600">Buy</button><p class="text-sm font-semibold mt-1">Cost: $${upgrade.cost.toFixed(2)}</p></div>`;
        const button = item.querySelector('button');
        button.onclick = buyAsiyasHelp;
        if (clicksToDevelopLead <= 10) {
            button.disabled = true;
            button.textContent = 'Maxed';
            button.classList.add('bg-gray-400', 'cursor-not-allowed');
            button.classList.remove('bg-indigo-500', 'hover:bg-indigo-600');
        }
        container.appendChild(item);
    }
    
    function renderGlobalUpgrades() {
        const container = document.getElementById('globalUpgradesList');
        const upgrade = upgrades.nytPuzzles;
        container.innerHTML = '';
        const item = document.createElement('div');
        item.className = 'bg-gray-50 p-4 rounded-lg shadow-sm flex justify-between items-center';
        item.innerHTML = `<div><h4 class="font-bold text-lg">NYT Puzzles</h4><p class="text-sm text-gray-600">Boosts the effectiveness of all Sales and Account upgrades by x${upgrade.multiplier}.</p><p class="text-sm text-gray-600">One-time purchase.</p></div><div class="text-right"><button class="px-4 py-2 rounded-md bg-purple-500 text-white font-semibold hover:bg-purple-600">Buy</button><p class="text-sm font-semibold mt-1">Cost: $${upgrade.cost.toFixed(2)}</p></div>`;
        const button = item.querySelector('button');
        button.onclick = buyNytPuzzles;
        if (upgrade.purchased) {
            button.disabled = true;
            button.textContent = 'Purchased';
            button.classList.add('bg-gray-400', 'cursor-not-allowed');
            button.classList.remove('bg-purple-500', 'hover:bg-purple-600');
        }
        container.appendChild(item);
    }

    // --- INITIALIZE GAME ---
    function initialize() {
        createInitialStaffButtons();
        renderSalesUpgrades();
        renderAccountsUpgrades();
        renderGlobalUpgrades();
        renderAchievements();
        setInterval(updateMoney, 1000);
        updateGlobalStats();
    }

    // Run the game
    window.onload = initialize;
  </script>
</body>
</html>
